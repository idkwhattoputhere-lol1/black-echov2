<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Black Echo | Panel de Usuario</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
    --primary: #00f3ff;
    --primary-dim: rgba(0, 243, 255, 0.1);
    --secondary: #bd00ff;
    --bg-deep: #030304;
    --bg-surface: #0a0a0c;
    --text-main: #ffffff;
    --text-muted: #8892b0;
    --border-color: rgba(255, 255, 255, 0.08);
    --glass: rgba(10, 10, 12, 0.7);
    --success: #00ff9d;
    --warning: #ffb300;
    --danger: #ff3a5e;
    --easing: cubic-bezier(0.23, 1, 0.32, 1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background-color: var(--bg-deep);
    color: var(--text-main);
    font-family: 'Rajdhani', sans-serif;
    overflow-x: hidden;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    height: 100vh;
    display: flex;
    flex-direction: column;
    cursor: auto;
}

h1, h2, h3, .logo, .btn, .nav-item {
    font-family: 'Orbitron', sans-serif;
    text-transform: uppercase;
}

/* --- Efectos Globales --- */
.scanlines {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
    background-size: 100% 4px;
    pointer-events: none;
    z-index: 9999;
    opacity: 0.3;
}

.noise-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(#noiseFilter)" opacity="0.05"/></svg>');
    pointer-events: none;
    z-index: 0;
}

.ambient-glow {
    position: fixed;
    width: 800px;
    height: 800px;
    background: radial-gradient(circle at 50% 50%, rgba(0, 243, 255, 0.08), transparent 70%);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 1;
    animation: pulseGlow 10s infinite alternate;
}

@keyframes pulseGlow {
    0% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
    100% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; }
}

/* --- Navegación --- */
.dashboard-nav {
    position: fixed;
    top: 0;
    width: 100%;
    padding: 1.5rem 5%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
    background: rgba(3, 3, 4, 0.85);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border-color);
}

.logo {
    font-size: 1.5rem;
    font-weight: 900;
    letter-spacing: 4px;
    color: #fff;
    position: relative;
}

.logo span { color: var(--primary); }

.user-profile {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 4px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
}

.user-info {
    text-align: right;
}

.user-name {
    font-weight: 600;
    font-size: 1rem;
}

.user-status {
    font-size: 0.8rem;
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.status-dot {
    width: 8px;
    height: 8px;
    background-color: var(--success);
    border-radius: 50%;
    animation: pulseDot 2s infinite;
}

@keyframes pulseDot {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

/* --- Diseño del Panel --- */
.dashboard-container {
    display: flex;
    flex: 1;
    margin-top: 80px;
    height: calc(100vh - 80px);
}

/* --- Barra Lateral --- */
.sidebar {
    width: 260px;
    background: rgba(5, 5, 8, 0.85);
    border-right: 1px solid var(--border-color);
    padding: 2rem 0;
    display: flex;
    flex-direction: column;
    backdrop-filter: blur(10px);
    z-index: 100;
    transition: transform 0.3s var(--easing);
}

.nav-section {
    margin-bottom: 2rem;
    padding: 0 1.5rem;
}

.nav-title {
    color: var(--text-muted);
    font-size: 0.8rem;
    letter-spacing: 2px;
    margin-bottom: 1rem;
    text-transform: uppercase;
}

.nav-list {
    list-style: none;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.5rem;
    margin-bottom: 0.5rem;
    color: var(--text-muted);
    text-decoration: none;
    transition: all 0.3s;
    position: relative;
    clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
    cursor: pointer;
}

.nav-item.active, .nav-item:hover {
    background: var(--primary-dim);
    color: var(--primary);
    border-left: 3px solid var(--primary);
}

.nav-item i {
    width: 20px;
    text-align: center;
    font-size: 1.1rem;
}

.nav-item .badge {
    margin-left: auto;
    background: var(--secondary);
    color: white;
    font-size: 0.7rem;
    padding: 2px 8px;
    border-radius: 10px;
}

.mobile-menu-btn {
    display: none;
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    background: transparent;
    border: none;
    color: var(--primary);
    font-size: 1.5rem;
    z-index: 1001;
    cursor: pointer;
}

/* --- Área de Contenido Principal --- */
.main-content {
    flex: 1;
    padding: 2rem;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

/* --- Encabezado del Panel --- */
.dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.dashboard-title {
    font-size: 2.5rem;
    background: linear-gradient(180deg, #fff, var(--primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* --- Tarjeta de Bienvenida --- */
.welcome-card {
    background: var(--glass);
    padding: 2rem;
    text-align: center;
    border: 1px solid var(--border-color);
    clip-path: polygon(25px 0, 100% 0, 100% calc(100% - 25px), calc(100% - 25px) 100%, 0 100%, 0 25px);
    margin-bottom: 2rem;
}

.welcome-title {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.welcome-desc {
    color: var(--text-muted);
    margin-bottom: 1.5rem;
    font-size: 1.1rem;
}

/* --- Insignias de Confianza --- */
.trust-badges {
    display: flex;
    justify-content: space-around;
    gap: 1rem;
    margin-bottom: 2rem;
}

.trust-badge {
    text-align: center;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    flex: 1;
    clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
    transition: all 0.3s;
    cursor: default;
}

.trust-badge:hover {
    border-color: var(--primary);
    transform: translateY(-5px);
}

.trust-badge i {
    font-size: 2rem;
    color: var(--primary);
    margin-bottom: 0.5rem;
}

.trust-badge div {
    font-weight: 600;
}

/* --- Widgets de Estadísticas --- */
.stats-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 1rem;
}

.stat-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    padding: 1.5rem;
    position: relative;
    clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
    transition: all 0.3s;
}

.stat-card:hover {
    border-color: var(--primary);
    transform: translateY(-5px);
}

.stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.stat-title {
    font-size: 1rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.stat-icon {
    font-size: 1.5rem;
    color: var(--primary);
}

.stat-value {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    font-family: 'Orbitron';
}

.stat-change {
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.stat-change.positive {
    color: var(--success);
}

.stat-change.negative {
    color: var(--danger);
}

/* --- Terminal de Ejecución --- */
.terminal-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    margin-bottom: 2rem;
}

.terminal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid var(--border-color);
    border-bottom: none;
    clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 0px), calc(100% - 20px) 100%, 0 100%, 0 20px);
}

.terminal-title {
    font-size: 1.2rem;
    color: var(--primary);
}

.terminal-actions {
    display: flex;
    gap: 1rem;
}

.terminal-body {
    flex: 1;
    background: rgba(10, 10, 15, 0.9);
    border: 1px solid var(--border-color);
    padding: 0;
    position: relative;
    overflow: hidden;
}

/* --- Simulación de Editor de Código --- */
.code-editor {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.editor-toolbar {
    display: flex;
    padding: 0.8rem 1rem;
    background: rgba(0, 0, 0, 0.5);
    border-bottom: 1px solid var(--border-color);
    gap: 1rem;
}

.editor-btn {
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-muted);
    padding: 0.4rem 1rem;
    font-family: 'Rajdhani';
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
}

.editor-btn:hover, .editor-btn.active {
    background: var(--primary-dim);
    color: var(--primary);
    border-color: var(--primary);
}

.editor-content {
    flex: 1;
    padding: 1.5rem;
    font-family: 'Courier New', monospace;
    font-size: 0.95rem;
    line-height: 1.5;
    overflow-y: auto;
}

.line-number {
    display: inline-block;
    width: 40px;
    color: var(--text-muted);
    text-align: right;
    margin-right: 1rem;
    user-select: none;
}

.code-keyword { color: #569cd6; }
.code-function { color: #dcdcaa; }
.code-string { color: #ce9178; }
.code-comment { color: #6a9955; }
.code-number { color: #b5cea8; }
.code-operator { color: #d4d4d4; }

/* --- Scripts Destacados --- */
.scripts-container {
    margin-top: 1rem;
}

.scripts-title {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: var(--text-main);
}

.scripts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 1.5rem;
}

.script-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    padding: 1.5rem;
    transition: all 0.3s;
    clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
}

.script-card:hover {
    border-color: var(--primary);
    transform: translateY(-5px);
}

.script-image {
    width: 100%;
    height: 140px;
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: var(--primary);
    border: 1px solid var(--border-color);
    clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
}

.script-title {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    color: var(--text-main);
}

.script-desc {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-bottom: 1rem;
    line-height: 1.4;
}

.script-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.script-rating {
    color: var(--warning);
    font-size: 0.9rem;
}

.script-btn {
    background: transparent;
    border: 1px solid var(--primary);
    color: var(--primary);
    padding: 0.4rem 1rem;
    font-family: 'Orbitron';
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
    clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
}

.script-btn:hover {
    background: var(--primary-dim);
    box-shadow: 0 0 10px rgba(0, 243, 255, 0.3);
    transform: scale(1.05);
}

/* --- Botones --- */
.btn {
    padding: 1rem 2rem;
    font-size: 0.9rem;
    font-weight: 700;
    letter-spacing: 2px;
    border: none;
    cursor: pointer;
    position: relative;
    transition: all 0.3s var(--easing);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
}

.btn:hover {
    transform: scale(1.05);
}

.btn-primary {
    background: var(--primary);
    color: #000;
}

.btn-primary:hover {
    box-shadow: 0 0 30px rgba(0, 243, 255, 0.4);
}

.btn-secondary {
    background: transparent;
    color: var(--primary);
    box-shadow: inset 0 0 0 2px var(--primary);
}

.btn-secondary:hover {
    background: rgba(0, 243, 255, 0.1);
    text-shadow: 0 0 15px var(--primary);
    box-shadow: inset 0 0 0 2px var(--primary), 0 0 30px rgba(0, 243, 255, 0.4);
}

.btn-danger {
    background: transparent;
    color: var(--danger);
    box-shadow: inset 0 0 0 2px var(--danger);
}

.btn-danger:hover {
    background: rgba(255, 58, 94, 0.1);
    text-shadow: 0 0 15px var(--danger);
    box-shadow: inset 0 0 0 2px var(--danger), 0 0 30px rgba(255, 58, 94, 0.4);
}

.btn-download {
    animation: pulseCTA 2s infinite ease-in-out;
}

@keyframes pulseCTA {
    0%, 100% { box-shadow: 0 0 20px rgba(0,243,255,0.2); }
    50% { box-shadow: 0 0 40px rgba(0,243,255,0.6); }
}

/* --- Pie de Página --- */
.dashboard-footer {
    border-top: 1px solid var(--border-color);
    padding: 1.5rem 5%;
    text-align: center;
    background: radial-gradient(circle at top, rgba(10,10,15,1), var(--bg-deep));
    position: relative;
    z-index: 10;
    margin-top: auto;
}

.footer-text {
    color: var(--text-muted);
    font-size: 0.9rem;
}

/* --- Responsive --- */
@media (max-width: 1100px) {
    .sidebar {
        transform: translateX(-100%);
        position: fixed;
        height: 100%;
        top: 80px;
    }
    
    .sidebar.active {
        transform: translateX(0);
    }
    
    .mobile-menu-btn {
        display: block;
    }
    
    .stats-container {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .scripts-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .trust-badges {
        flex-wrap: wrap;
    }
}

@media (max-width: 768px) {
    .stats-container {
        grid-template-columns: 1fr;
    }
    
    .scripts-grid {
        grid-template-columns: 1fr;
    }
    
    .dashboard-title {
        font-size: 2rem;
    }
    
    .main-content {
        padding: 1.5rem;
    }
    
    .terminal-header {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
    }
    
    .terminal-actions {
        width: 100%;
        justify-content: space-between;
    }
    
    .trust-badges {
        flex-direction: column;
    }
}

/* --- Animaciones --- */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.fade-in {
    animation: fadeIn 0.5s var(--easing) forwards;
}

.delay-1 { animation-delay: 0.1s; opacity: 0; }
.delay-2 { animation-delay: 0.2s; opacity: 0; }
.delay-3 { animation-delay: 0.3s; opacity: 0; }

/* === NUEVOS MÓDULOS === */
/* --- Panel de Registros de Ejecución --- */
.logs-container {
    margin-top: 2rem;
    border: 1px solid var(--border-color);
    clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
    background: rgba(255, 255, 255, 0.02);
    animation: fadeIn 0.5s var(--easing);
}

.logs-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    background: rgba(0, 0, 0, 0.3);
    border-bottom: 1px solid var(--border-color);
}

.logs-title {
    font-size: 1.2rem;
    color: var(--primary);
    font-family: 'Orbitron';
}

.logs-actions {
    display: flex;
    gap: 1rem;
}

.logs-body {
    height: 300px;
    overflow-y: auto;
    padding: 0.5rem;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
    scroll-behavior: smooth;
}

.log-entry {
    padding: 0.5rem 0.8rem;
    margin-bottom: 0.25rem;
    border-left: 3px solid;
    animation: slideInLog 0.3s var(--easing);
}

@keyframes slideInLog {
    from { opacity: 0; transform: translateX(-20px); }
    to { opacity: 1; transform: translateX(0); }
}

.log-entry.success { border-color: var(--success); color: var(--success); }
.log-entry.warning { border-color: var(--warning); color: var(--warning); }
.log-entry.error { border-color: var(--danger); color: var(--danger); }
.log-entry.info { border-color: var(--primary); color: var(--primary); }

.log-timestamp {
    opacity: 0.7;
    margin-right: 1rem;
    font-size: 0.75rem;
}

/* --- Modal de Configuración --- */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(12px);
    z-index: 2000;
    display: none;
    align-items: center;
    justify-content: center;
}

.modal-content {
    width: 90%;
    max-width: 650px;
    max-height: 85vh;
    background: var(--glass);
    border: 1px solid var(--border-color);
    clip-path: polygon(25px 0, 100% 0, 100% calc(100% - 25px), calc(100% - 25px) 100%, 0 100%, 0 25px);
    overflow: hidden;
    animation: modalSlideIn 0.4s var(--easing);
}

@keyframes modalSlideIn {
    from { opacity: 0; transform: scale(0.95) translateY(10px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    background: rgba(0, 0, 0, 0.4);
    border-bottom: 1px solid var(--border-color);
}

.modal-title {
    font-size: 1.5rem;
    background: linear-gradient(180deg, #fff, var(--primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.modal-close {
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.2s;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
}

.modal-close:hover {
    color: var(--danger);
    text-shadow: 0 0 10px var(--danger);
}

.modal-tabs {
    display: flex;
    background: rgba(0, 0, 0, 0.2);
    border-bottom: 1px solid var(--border-color);
}

.tab-btn {
    flex: 1;
    padding: 1rem;
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-family: 'Orbitron', sans-serif;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.85rem;
}

.tab-btn.active {
    color: var(--primary);
    background: var(--primary-dim);
    border-bottom: 2px solid var(--primary);
}

.modal-body {
    padding: 1.5rem;
    max-height: 50vh;
    overflow-y: auto;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.3s var(--easing);
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-muted);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.85rem;
}

.form-input {
    width: 100%;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    color: var(--text-main);
    font-family: 'Rajdhani', sans-serif;
    font-size: 1rem;
    font-weight: 500;
    clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
    transition: all 0.3s;
}

.form-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 15px rgba(0, 243, 255, 0.2);
}

/* Opciones de Avatar */
.avatar-options {
    display: flex;
    gap: 1rem;
}

.avatar-option {
    cursor: pointer;
    padding: 0.5rem;
    border: 2px solid transparent;
    transition: all 0.3s;
    clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
}

.avatar-option.active {
    border-color: var(--primary);
    box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
}

.avatar-preview {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.2rem;
    clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
}

.neon-grad { background: linear-gradient(135deg, var(--primary), var(--secondary)); }
.cyan-grad { background: linear-gradient(135deg, #00f3ff, #0099cc); }
.purple-grad { background: linear-gradient(135deg, #bd00ff, #6600cc); }

/* Interruptor Toggle */
.toggle-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
}

.toggle-label {
    font-weight: 600;
    color: var(--text-main);
}

.toggle-btn {
    width: 50px;
    height: 24px;
    background: var(--border-color);
    border: none;
    border-radius: 12px;
    position: relative;
    cursor: pointer;
    transition: background 0.3s;
}

.toggle-btn.active {
    background: var(--primary);
}

.toggle-btn::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
    transition: transform 0.3s var(--easing);
}

.toggle-btn.active::after {
    transform: translateX(26px);
}

/* Lista de Sesiones */
.sessions-list {
    max-height: 200px;
    overflow-y: auto;
}

.session-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.8rem;
    margin-bottom: 0.5rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
    transition: all 0.2s;
}

.session-info {
    flex: 1;
}

.session-device {
    font-weight: 600;
    color: var(--text-main);
}

.session-ip {
    font-size: 0.8rem;
    color: var(--text-muted);
    font-family: 'Courier New', monospace;
}

.session-time {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.revoke-btn {
    background: transparent;
    border: 1px solid var(--danger);
    color: var(--danger);
    padding: 0.4rem 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
    clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
    font-family: 'Orbitron';
    font-size: 0.7rem;
}

.revoke-btn:hover:not(:disabled) {
    background: rgba(255, 58, 94, 0.1);
    box-shadow: 0 0 10px rgba(255, 58, 94, 0.3);
}

.revoke-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

/* Suscripción */
.sub-details {
    padding: 1rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid var(--border-color);
    margin-bottom: 1.5rem;
    clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
}

.sub-plan {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 0.5rem;
}

.sub-price {
    font-size: 1.5rem;
    font-weight: 900;
    color: var(--text-main);
    margin-bottom: 0.5rem;
}

.sub-renewal {
    color: var(--text-muted);
}

/* --- Gráfico de Rendimiento --- */
.graph-card {
    grid-column: span 2;
}

.graph-container {
    position: relative;
    height: 200px;
    margin: 1rem 0;
}

#latencyGraph {
    width: 100%;
    height: 100%;
    border: 1px solid var(--border-color);
    background: rgba(0, 0, 0, 0.3);
    cursor: crosshair;
}

.graph-tooltip {
    position: absolute;
    padding: 0.6rem 1rem;
    background: rgba(10, 10, 12, 0.95);
    border: 1px solid var(--primary);
    color: var(--text-main);
    font-size: 0.85rem;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.2s;
    z-index: 100;
    clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
    font-family: 'Rajdhani';
    font-weight: 600;
}

.graph-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

@media (max-width: 1100px) {
    .graph-card {
        grid-column: span 1;
    }
}
</style>
</head>
<body>
<div class="scanlines"></div>
<div class="noise-bg"></div>
<div class="ambient-glow"></div>

<!-- Navegación -->
<nav class="dashboard-nav">
    <div class="logo">BLACK <span>ECHO</span></div>
    <button class="mobile-menu-btn" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>
    <div class="user-profile">
        <div class="user-info">
            <div class="user-name">USUARIO_NEON</div>
            <div class="user-status">
                <div class="status-dot"></div>
                ACCESO PREMIUM
            </div>
        </div>
        <div class="user-avatar">NE</div>
    </div>
</nav>

<!-- Contenedor del Panel -->
<div class="dashboard-container">
    <!-- Barra Lateral -->
    <aside class="sidebar" id="sidebar">
        <div class="nav-section">
            <div class="nav-title">NAVEGACIÓN</div>
            <ul class="nav-list">
                <li><a href="#" class="nav-item active">
                    <i class="fas fa-terminal"></i>
                    Centro de Scripts
                    <span class="badge">NUEVO</span>
                </a></li>
                <li><a href="#" class="nav-item">
                    <i class="fas fa-code"></i>
                    Ejecutor
                </a></li>
                <li><a href="#" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    Rendimiento
                </a></li>
                <li><a href="#" class="nav-item">
                    <i class="fas fa-cog"></i>
                    Configuración
                </a></li>
            </ul>
        </div>
        <div class="nav-section">
            <div class="nav-title">CUENTA</div>
            <ul class="nav-list">
                <li><a href="#" class="nav-item" data-action="profile">
                    <i class="fas fa-user"></i>
                    Perfil
                </a></li>
                <li><a href="#" class="nav-item" data-action="security">
                    <i class="fas fa-shield-alt"></i>
                    Seguridad
                </a></li>
                <li><a href="#" class="nav-item" data-action="logs">
                    <i class="fas fa-history"></i>
                    Registros de Ejecución
                </a></li>
                <li><a href="#" class="nav-item">
                    <i class="fas fa-sign-out-alt"></i>
                    Cerrar Sesión
                </a></li>
            </ul>
        </div>
        <div class="nav-section" style="margin-top: auto;">
            <div class="nav-title">ESTADO DEL SISTEMA</div>
            <div style="padding: 1rem 1.5rem; border: 1px solid var(--border-color); clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span style="color: var(--text-muted);">Estado API:</span>
                    <span style="color: var(--success); font-weight: 600;">EN LÍNEA</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: var(--text-muted);">Inyección:</span>
                    <span style="color: var(--success); font-weight: 600;">ACTIVA</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- Contenido Principal -->
    <main class="main-content">
        <div class="dashboard-header">
            <h1 class="dashboard-title fade-in">PANEL DE USUARIO</h1>
            <button class="btn btn-secondary fade-in delay-1">
                <i class="fas fa-sync-alt"></i> ACTUALIZAR DATOS
            </button>
        </div>

        <!-- Tarjeta de Bienvenida -->
        <div class="welcome-card fade-in">
            <h2 class="welcome-title">Bienvenido de nuevo, <span class="user-name">USUARIO_NEON</span></h2>
            <p class="welcome-desc">Tu acceso premium está activo. Descarga la última versión del ejecutor Black Echo para un rendimiento óptimo.</p>
            <button class="btn btn-primary btn-download"><i class="fas fa-download"></i> DESCARGAR V4.5.0</button>
        </div>

        <!-- Insignias de Confianza -->
        <div class="trust-badges fade-in delay-1">
            <div class="trust-badge">
                <i class="fas fa-shield-alt"></i>
                <div>Inyección Segura</div>
            </div>
            <div class="trust-badge">
                <i class="fas fa-star"></i>
                <div>Calificación 5 Estrellas</div>
            </div>
            <div class="trust-badge">
                <i class="fas fa-users"></i>
                <div>100K+ Usuarios</div>
            </div>
            <div class="trust-badge">
                <i class="fas fa-bolt"></i>
                <div>Ultra Rápido</div>
            </div>
        </div>

        <!-- Widgets de Estadísticas -->
        <div class="stats-container">
            <div class="stat-card fade-in delay-1">
                <div class="stat-header">
                    <div class="stat-title">ESTADO DE INYECCIÓN</div>
                    <div class="stat-icon"><i class="fas fa-syringe"></i></div>
                </div>
                <div class="stat-value" id="injectionStatus">ACTIVA</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>Integridad del hook: 100%</span>
                </div>
            </div>
            <div class="stat-card graph-card fade-in delay-2" id="graphCard">
                <div class="stat-header">
                    <div class="stat-title">LATENCIA API (TIEMPO REAL)</div>
                    <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                </div>
                <div class="graph-container">
                    <canvas id="latencyGraph"></canvas>
                </div>
                <div class="graph-info">
                    <div class="stat-value" id="currentLatency">12ms</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-down"></i>
                        <span>Rendimiento óptimo</span>
                    </div>
                </div>
            </div>
            <div class="stat-card fade-in delay-3">
                <div class="stat-header">
                    <div class="stat-title">TIPO DE CUENTA</div>
                    <div class="stat-icon"><i class="fas fa-crown"></i></div>
                </div>
                <div class="stat-value">PREMIUM</div>
                <div class="stat-change">
                    <i class="fas fa-infinity"></i>
                    <span>Expira: Nunca</span>
                </div>
            </div>
        </div>

        <!-- Terminal de Ejecución -->
        <div class="terminal-container fade-in delay-2">
            <div class="terminal-header">
                <div class="terminal-title">TERMINAL DE EJECUCIÓN</div>
                <div class="terminal-actions">
                    <button class="btn btn-primary" id="executeBtn">
                        <i class="fas fa-play"></i> EJECUTAR
                    </button>
                    <button class="btn btn-secondary" id="clearBtn">
                        <i class="fas fa-broom"></i> LIMPIAR
                    </button>
                    <button class="btn btn-secondary" id="saveBtn">
                        <i class="fas fa-save"></i> GUARDAR
                    </button>
                </div>
            </div>
            <div class="terminal-body">
                <div class="code-editor">
                    <div class="editor-toolbar">
                        <button class="editor-btn active">script.lua</button>
                        <button class="editor-btn">autoexec.lua</button>
                        <button class="editor-btn">ui-library.lua</button>
                        <div style="margin-left: auto; display: flex; gap: 0.5rem;">
                            <button class="editor-btn">
                                <i class="fas fa-expand-alt"></i>
                            </button>
                            <button class="editor-btn">
                                <i class="fas fa-cog"></i>
                            </button>
                        </div>
                    </div>
                    <div class="editor-content" id="codeEditor">
                        <!-- Las líneas de código se insertarán mediante JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Registros de Ejecución -->
        <div class="logs-container" id="logsContainer">
            <div class="logs-header">
                <div class="logs-title">REGISTROS DE EJECUCIÓN</div>
                <div class="logs-actions">
                    <button class="btn btn-secondary" id="clearLogsBtn">
                        <i class="fas fa-broom"></i> LIMPIAR
                    </button>
                    <button class="btn btn-secondary" id="exportLogsBtn">
                        <i class="fas fa-download"></i> EXPORTAR
                    </button>
                </div>
            </div>
            <div class="logs-body" id="logsBody"></div>
        </div>

        <!-- Scripts Destacados -->
        <div class="scripts-container fade-in delay-3">
            <h2 class="scripts-title">SCRIPTS DESTACADOS</h2>
            <div class="scripts-grid">
                <div class="script-card">
                    <div class="script-image">
                        <i class="fas fa-fish"></i>
                    </div>
                    <h3 class="script-title">Blox Fruits V4</h3>
                    <p class="script-desc">Auto farm, auto raid, notificador de frutas, y más para Blox Fruits.</p>
                    <div class="script-footer">
                        <div class="script-rating">
                            <i class="fas fa-star"></i> 4.9
                        </div>
                        <button class="script-btn">INYECTAR</button>
                    </div>
                </div>
                <div class="script-card">
                    <div class="script-image">
                        <i class="fas fa-dragon"></i>
                    </div>
                    <h3 class="script-title">Pet Simulator X</h3>
                    <p class="script-desc">Auto eclosionar, auto farm, duplicar mascotas, y teletransporte a mejores áreas.</p>
                    <div class="script-footer">
                        <div class="script-rating">
                            <i class="fas fa-star"></i> 4.7
                        </div>
                        <button class="script-btn">INYECTAR</button>
                    </div>
                </div>
                <div class="script-card">
                    <div class="script-image">
                        <i class="fas fa-boxing-glove"></i>
                    </div>
                    <h3 class="script-title">King Legacy</h3>
                    <p class="script-desc">Auto farm, auto jefe, auto comprar items, y ESP de frutas.</p>
                    <div class="script-footer">
                        <div class="script-rating">
                            <i class="fas fa-star"></i> 4.8
                        </div>
                        <button class="script-btn">INYECTAR</button>
                    </div>
                </div>
                <div class="script-card">
                    <div class="script-image">
                        <i class="fas fa-skull-crossbones"></i>
                    </div>
                    <h3 class="script-title">Murder Mystery 2</h3>
                    <p class="script-desc">ESP, auto ganar, aura de cuchillo, y revelar sheriff.</p>
                    <div class="script-footer">
                        <div class="script-rating">
                            <i class="fas fa-star"></i> 4.6
                        </div>
                        <button class="script-btn">INYECTAR</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- Modal de Configuración -->
<div class="modal-overlay" id="settingsModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">CONFIGURACIÓN DE CUENTA</h2>
            <button class="modal-close" id="closeModal">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-tabs">
            <button class="tab-btn active" data-tab="profile">PERFIL</button>
            <button class="tab-btn" data-tab="security">SEGURIDAD</button>
            <button class="tab-btn" data-tab="subscription">SUSCRIPCIÓN</button>
        </div>
        <div class="modal-body">
            <div class="tab-content active" id="profile-tab">
                <div class="form-group">
                    <label class="form-label">NOMBRE DE USUARIO</label>
                    <input type="text" class="form-input" value="USUARIO_NEON" id="usernameInput">
                </div>
                <div class="form-group">
                    <label class="form-label">ESTILO DE AVATAR</label>
                    <div class="avatar-options">
                        <div class="avatar-option active" data-avatar="neon">
                            <div class="avatar-preview neon-grad">NE</div>
                        </div>
                        <div class="avatar-option" data-avatar="cyan">
                            <div class="avatar-preview cyan-grad">NE</div>
                        </div>
                        <div class="avatar-option" data-avatar="purple">
                            <div class="avatar-preview purple-grad">NE</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-content" id="security-tab">
                <div class="form-group">
                    <div class="toggle-container">
                        <span class="toggle-label">Autenticación de Dos Factores</span>
                        <button class="toggle-btn" id="twoFAToggle"></button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">SESIONES ACTIVAS</label>
                    <div class="sessions-list" id="sessionsList"></div>
                </div>
                <div style="margin-top: 1rem;">
                    <button class="btn btn-danger" id="revokeAllBtn">
                        <i class="fas fa-ban"></i> REVOCAR TODAS LAS SESIONES
                    </button>
                </div>
            </div>
            <div class="tab-content" id="subscription-tab">
                <div class="sub-details">
                    <div class="sub-plan">PLAN PREMIUM</div>
                    <div class="sub-price">$19.99/mes</div>
                    <div class="sub-renewal">Renueva el: <span id="renewalDate"></span></div>
                </div>
                <button class="btn btn-primary" id="upgradeBtn">
                    <i class="fas fa-arrow-up"></i> ACTUALIZAR A ELITE
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Pie de Página -->
<footer class="dashboard-footer">
    <p class="footer-text">Black Echo v4.5.0 | Tiempo de Actividad: 99.8% | Última Actualización: Hoy 14:32 UTC</p>
    <p class="footer-text" style="font-size: 0.8rem; margin-top: 0.5rem;">&copy; 2026 Black Echo Inc. Todos los derechos reservados. Solo para fines educativos.</p>
</footer>

<script>
// Alternar Menú Móvil
const menuToggle = document.getElementById('menuToggle');
const sidebar = document.getElementById('sidebar');
menuToggle.addEventListener('click', () => {
    sidebar.classList.toggle('active');
    menuToggle.innerHTML = sidebar.classList.contains('active')
        ? '<i class="fas fa-times"></i>'
        : '<i class="fas fa-bars"></i>';
});

// Contenido del Editor de Código
const codeEditor = document.getElementById('codeEditor');
const codeLines = [
    '<span class="code-keyword">local</span> BlackEcho = <span class="code-function">getexecutorname</span>()',
    '',
    '<span class="code-keyword">if</span> BlackEcho == <span class="code-string">"Black Echo"</span> <span class="code-keyword">then</span>',
    ' <span class="code-function">print</span>(<span class="code-string">"[SISTEMA] Inyección exitosa"</span>)',
    '<span class="code-keyword">end</span>',
    '',
    '<span class="code-comment">-- Script de auto-ejecución para Blox Fruits</span>',
    '<span class="code-keyword">local</span> Library = <span class="code-function">loadstring</span>(<span class="code-function">game</span>:HttpGet(<span class="code-string">"https://blackecho.cc/ui"</span>))()',
    '',
    '<span class="code-keyword">local</span> Window = Library:CreateWindow({',
    ' Name = <span class="code-string">"Black Echo | Blox Fruits"</span>,',
    ' Icon = <span class="code-string">"rbxassetid://4483345998"</span>,',
    ' Theme = <span class="code-string">"Cyberpunk"</span>',
    '})',
    '',
    '<span class="code-keyword">local</span> FarmTab = Window:CreateTab(<span class="code-string">"Auto Farm"</span>)',
    '<span class="code-keyword">local</span> Section1 = FarmTab:CreateSection(<span class="code-string">"Características Principales"</span>)',
    '',
    'Section1:CreateToggle({',
    ' Name = <span class="code-string">"Auto Farm Niveles"</span>,',
    ' Default = <span class="code-keyword">true</span>,',
    ' Callback = <span class="code-keyword">function</span>(Value)',
    ' AutoFarm = Value',
    ' <span class="code-function">task.spawn</span>(<span class="code-keyword">function</span>()',
    ' <span class="code-keyword">while</span> AutoFarm <span class="code-keyword">do</span>',
    ' <span class="code-function">farmFunction</span>()',
    ' <span class="code-function">task.wait</span>(<span class="code-number">0.1</span>)',
    ' <span class="code-keyword">end</span>',
    ' <span class="code-keyword">end</span>)',
    ' <span class="code-keyword">end</span>',
    '})',
    '',
    '<span class="code-comment">-- Configuración adicional</span>',
    'Section1:CreateSlider({',
    ' Name = <span class="code-string">"Velocidad de Farm"</span>,',
    ' Min = <span class="code-number">1</span>,',
    ' Max = <span class="code-number">10</span>,',
    ' Default = <span class="code-number">5</span>,',
    ' Callback = <span class="code-keyword">function</span>(Value)',
    ' FarmSpeed = Value',
    ' <span class="code-keyword">end</span>',
    '})'
];

codeLines.forEach((line, index) => {
    const lineElement = document.createElement('div');
    lineElement.innerHTML = `<span class="line-number">${index + 1}</span>${line}`;
    codeEditor.appendChild(lineElement);
});

// Sistema de Notificaciones
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
        <span>${message}</span>
    `;
    notification.style.position = 'fixed';
    notification.style.top = '100px';
    notification.style.right = '20px';
    notification.style.padding = '1rem 1.5rem';
    notification.style.background = type === 'success'
        ? 'rgba(0, 255, 157, 0.1)'
        : type === 'error'
        ? 'rgba(255, 58, 94, 0.1)'
        : 'rgba(0, 243, 255, 0.1)';
    notification.style.border = `1px solid ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--danger)' : 'var(--primary)'}`;
    notification.style.color = 'var(--text-main)';
    notification.style.fontFamily = "'Rajdhani', sans-serif";
    notification.style.fontWeight = '600';
    notification.style.display = 'flex';
    notification.style.alignItems = 'center';
    notification.style.gap = '0.8rem';
    notification.style.zIndex = '10000';
    notification.style.clipPath = 'polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px)';
    notification.style.animation = 'fadeIn 0.3s ease';
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'fadeIn 0.3s ease reverse';
        setTimeout(() => document.body.removeChild(notification), 300);
    }, 3000);
}

// Funcionalidad Principal
document.getElementById('executeBtn').addEventListener('click', function() {
    const statusElement = document.getElementById('injectionStatus');
    statusElement.textContent = "EJECUTANDO";
    statusElement.style.color = "var(--warning)";
    
    setTimeout(() => {
        statusElement.textContent = "ÉXITO";
        statusElement.style.color = "var(--success)";
        const newLatency = Math.floor(Math.random() * 10) + 10;
        document.getElementById('currentLatency').textContent = newLatency + "ms";
        showNotification("¡Script ejecutado exitosamente!", "success");
    }, 1500);
});

document.getElementById('clearBtn').addEventListener('click', function() {
    codeEditor.innerHTML = '';
    showNotification("Terminal limpiado", "info");
});

document.getElementById('saveBtn').addEventListener('click', function() {
    showNotification("Script guardado en almacenamiento en la nube", "success");
});

// Funcionalidad Mejorada con Registro
document.querySelectorAll('.script-btn').forEach(button => {
    button.addEventListener('click', function() {
        const scriptTitle = this.closest('.script-card').querySelector('.script-title').textContent;
        showNotification(`Inyectando ${scriptTitle}...`, "info");
        
        setTimeout(() => {
            if (Math.random() > 0.1) {
                showNotification(`¡${scriptTitle} inyectado exitosamente!`, "success");
            } else {
                showNotification(`Error de inyección: ${scriptTitle}`, "error");
            }
        }, 1000);
    });
});

// Actualizaciones de Datos en Tiempo Real
function updateLiveData() {
    const currentLatency = parseInt(document.getElementById('currentLatency').textContent);
    const change = Math.floor(Math.random() * 5) - 2;
    const newLatency = Math.max(8, Math.min(30, currentLatency + change));
    document.getElementById('currentLatency').textContent = newLatency + "ms";
}

setInterval(updateLiveData, 5000);

// Animación al Desplazar
const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add('fade-in');
    });
}, observerOptions);

document.querySelectorAll('.stat-card, .script-card').forEach(card => observer.observe(card));

// === IMPLEMENTACIÓN DE NUEVOS MÓDULOS ===
// Sistema de Registros de Ejecución
class LogManager {
    constructor() {
        this.logs = [];
        this.logsBody = document.getElementById('logsBody');
        this.maxLogs = 100;
        this.init();
    }
    
    init() {
        this.addLog('Sistema inicializado exitosamente', 'success');
        this.addLog('Backend del ejecutor conectado', 'info');
        this.addLog('Conectando al proceso de Roblox...', 'info');
        
        this.logsBody.addEventListener('DOMNodeInserted', () => {
            this.logsBody.scrollTop = this.logsBody.scrollHeight;
        });
    }
    
    addLog(message, type = 'info') {
        const timestamp = new Date().toLocaleTimeString('es-ES', { hour12: false });
        const logEntry = document.createElement('div');
        logEntry.className = `log-entry ${type}`;
        logEntry.innerHTML = `<span class="log-timestamp">[${timestamp}]</span>${message}`;
        this.logsBody.appendChild(logEntry);
        
        this.logs.push({ timestamp, message, type });
        
        if (this.logs.length > this.maxLogs) {
            this.logs.shift();
            this.logsBody.removeChild(this.logsBody.firstChild);
        }
    }
    
    clear() {
        this.logs = [];
        this.logsBody.innerHTML = '';
        this.addLog('Registros limpiados', 'warning');
    }
    
    export() {
        const content = this.logs.map(log =>
            `[${log.timestamp}] [${log.type.toUpperCase()}] ${log.message}`
        ).join('\n');
        
        const blob = new Blob([content], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `black-echo-registros-${Date.now()}.txt`;
        a.click();
        URL.revokeObjectURL(url);
        
        this.addLog('Registros exportados exitosamente', 'success');
    }
}

const logManager = new LogManager();
document.getElementById('clearLogsBtn').addEventListener('click', () => logManager.clear());
document.getElementById('exportLogsBtn').addEventListener('click', () => logManager.export());

// Sistema de Modal de Configuración
class SettingsModal {
    constructor() {
        this.modal = document.getElementById('settingsModal');
        this.profileBtn = document.querySelector('.nav-item[data-action="profile"]');
        this.securityBtn = document.querySelector('.nav-item[data-action="security"]');
        this.closeBtn = document.getElementById('closeModal');
        this.tabBtns = document.querySelectorAll('.tab-btn');
        this.tabContents = document.querySelectorAll('.tab-content');
        this.twoFAToggle = document.getElementById('twoFAToggle');
        this.usernameInput = document.getElementById('usernameInput');
        this.avatarOptions = document.querySelectorAll('.avatar-option');
        this.sessionsList = document.getElementById('sessionsList');
        this.revokeAllBtn = document.getElementById('revokeAllBtn');
        this.upgradeBtn = document.getElementById('upgradeBtn');
        this.init();
    }
    
    init() {
        [this.profileBtn, this.securityBtn].forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                this.open(btn.dataset.action);
            });
        });
        
        this.closeBtn.addEventListener('click', () => this.close());
        
        this.tabBtns.forEach(btn => {
            btn.addEventListener('click', () => this.switchTab(btn.dataset.tab));
        });
        
        this.twoFAToggle.addEventListener('click', () => this.toggle2FA());
        
        this.avatarOptions.forEach(option => {
            option.addEventListener('click', () => this.selectAvatar(option.dataset.avatar));
        });
        
        this.usernameInput.addEventListener('change', () => this.updateUsername());
        this.revokeAllBtn.addEventListener('click', () => this.revokeAllSessions());
        this.upgradeBtn.addEventListener('click', () => showNotification('Redirigiendo a página de actualización...', 'info'));
        
        this.generateSessions();
        this.setRenewalDate();
        this.modal.addEventListener('click', (e) => { if (e.target === this.modal) this.close(); });
    }
    
    open(tab = 'profile') {
        this.modal.style.display = 'flex';
        this.switchTab(tab);
    }
    
    close() {
        this.modal.style.display = 'none';
    }
    
    switchTab(tabName) {
        this.tabBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.tab === tabName));
        this.tabContents.forEach(content => content.classList.toggle('active', content.id === `${tabName}-tab`));
    }
    
    toggle2FA() {
        const isActive = this.twoFAToggle.classList.contains('active');
        this.twoFAToggle.classList.toggle('active');
        showNotification(isActive ? '2FA desactivada' : '2FA activada', isActive ? 'warning' : 'success');
        logManager.addLog(`2FA ${isActive ? 'desactivada' : 'activada'} para la cuenta`, isActive ? 'warning' : 'info');
    }
    
    selectAvatar(avatarType) {
        this.avatarOptions.forEach(opt => opt.classList.toggle('active', opt.dataset.avatar === avatarType));
        const userAvatar = document.querySelector('.user-avatar');
        const preview = document.querySelector(`.avatar-option[data-avatar="${avatarType}"] .avatar-preview`);
        userAvatar.textContent = preview.textContent;
        userAvatar.style.background = preview.style.background;
        showNotification('Avatar actualizado', 'success');
        logManager.addLog(`Avatar cambiado a estilo ${avatarType}`, 'info');
    }
    
    updateUsername() {
        const newUsername = this.usernameInput.value;
        document.querySelector('.user-name').textContent = newUsername.toUpperCase();
        showNotification('Nombre de usuario actualizado', 'success');
        logManager.addLog(`Nombre de usuario cambiado a ${newUsername}`, 'info');
    }
    
    generateSessions() {
        const sessions = [
            { device: 'Windows PC', ip: '192.168.1.100', time: 'hace 2 horas', current: true },
            { device: 'iPhone', ip: '10.0.0.5', time: 'hace 1 día', current: false },
            { device: 'Android', ip: '10.0.0.6', time: 'hace 3 días', current: false }
        ];
        
        this.sessionsList.innerHTML = '';
        
        sessions.forEach(session => {
            const sessionItem = document.createElement('div');
            sessionItem.className = 'session-item';
            sessionItem.innerHTML = `
                <div class="session-info">
                    <div class="session-device">${session.device} ${session.current ? '(Actual)' : ''}</div>
                    <div class="session-ip">${session.ip}</div>
                    <div class="session-time">Última actividad: ${session.time}</div>
                </div>
                <button class="revoke-btn" ${session.current ? 'disabled' : ''}>REVOCAR</button>
            `;
            
            if (!session.current) {
                sessionItem.querySelector('.revoke-btn').addEventListener('click', () => {
                    sessionItem.style.animation = 'fadeIn 0.3s ease reverse';
                    setTimeout(() => sessionItem.remove(), 300);
                    showNotification('Sesión revocada', 'warning');
                    logManager.addLog(`Sesión revocada: ${session.device}`, 'warning');
                });
            }
            
            this.sessionsList.appendChild(sessionItem);
        });
    }
    
    revokeAllSessions() {
        if (confirm('¿Revocar todas las sesiones excepto la actual?')) {
            this.sessionsList.querySelectorAll('.session-item').forEach(item => {
                const btn = item.querySelector('.revoke-btn');
                if (!btn.disabled) {
                    item.style.animation = 'fadeIn 0.3s ease reverse';
                    setTimeout(() => item.remove(), 300);
                }
            });
            showNotification('Todas las otras sesiones revocadas', 'warning');
            logManager.addLog('Todas las sesiones revocadas excepto la actual', 'warning');
        }
    }
    
    setRenewalDate() {
        const date = new Date();
        date.setMonth(date.getMonth() + 1);
        document.getElementById('renewalDate').textContent = date.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' });
    }
}

const settingsModal = new SettingsModal();

// Gráfico de Rendimiento
class PerformanceGraph {
    constructor() {
        this.canvas = document.getElementById('latencyGraph');
        this.ctx = this.canvas.getContext('2d');
        this.tooltip = document.createElement('div');
        this.tooltip.className = 'graph-tooltip';
        this.canvas.parentElement.appendChild(this.tooltip);
        this.data = Array(60).fill(12);
        this.frame = 0;
        this.mouseX = 0;
        this.mouseY = 0;
        this.resize();
        this.bindEvents();
        this.start();
    }
    
    resize() {
        const rect = this.canvas.getBoundingClientRect();
        this.canvas.width = rect.width * window.devicePixelRatio;
        this.canvas.height = rect.height * window.devicePixelRatio;
        this.ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
        this.canvas.style.width = rect.width + 'px';
        this.canvas.style.height = rect.height + 'px';
    }
    
    bindEvents() {
        window.addEventListener('resize', () => this.resize());
        this.canvas.addEventListener('mousemove', (e) => {
            const rect = this.canvas.getBoundingClientRect();
            this.mouseX = e.clientX - rect.left;
            this.mouseY = e.clientY - rect.top;
        });
        this.canvas.addEventListener('mouseleave', () => this.tooltip.style.opacity = 0);
    }
    
    updateData() {
        const lastValue = this.data[this.data.length - 1];
        const baseChange = (Math.random() - 0.5) * 3;
        let newValue = lastValue + baseChange;
        
        if (Math.random() < 0.05) {
            newValue += Math.random() * 12 + 8;
            logManager.addLog('Pico de latencia API detectado', 'warning');
        }
        
        newValue = Math.max(8, Math.min(30, newValue));
        this.data.shift();
        this.data.push(newValue);
        
        document.getElementById('currentLatency').textContent = Math.round(newValue) + 'ms';
        
        const statusDot = document.querySelector('.status-dot');
        const changeElement = document.querySelector('.graph-info .stat-change');
        
        if (newValue > 20) {
            statusDot.style.backgroundColor = 'var(--warning)';
            changeElement.className = 'stat-change negative';
            changeElement.innerHTML = '<i class="fas fa-arrow-up"></i><span>Alta latencia</span>';
        } else if (newValue > 15) {
            statusDot.style.backgroundColor = 'var(--primary)';
            changeElement.className = 'stat-change';
            changeElement.innerHTML = '<i class="fas fa-minus"></i><span>Moderada</span>';
        } else {
            statusDot.style.backgroundColor = 'var(--success)';
            changeElement.className = 'stat-change positive';
            changeElement.innerHTML = '<i class="fas fa-arrow-down"></i><span>Óptima</span>';
        }
    }
    
    draw() {
        const rect = this.canvas.getBoundingClientRect();
        const width = rect.width, height = rect.height;
        this.ctx.clearRect(0, 0, width, height);
        
        // Líneas de fondo
        this.ctx.strokeStyle = 'rgba(255,255,255,0.05)';
        this.ctx.lineWidth = 1;
        for (let i = 1; i < 5; i++) {
            const y = (height / 5) * i;
            this.ctx.beginPath();
            this.ctx.moveTo(0, y);
            this.ctx.lineTo(width, y);
            this.ctx.stroke();
        }
        
        // Gráfico
        const gradient = this.ctx.createLinearGradient(0, 0, 0, height);
        gradient.addColorStop(0, 'rgba(0, 243, 255, 0.8)');
        gradient.addColorStop(1, 'rgba(0, 243, 255, 0.1)');
        
        this.ctx.strokeStyle = '#00f3ff';
        this.ctx.fillStyle = gradient;
        this.ctx.lineWidth = 2;
        this.ctx.shadowColor = '#00f3ff';
        this.ctx.shadowBlur = 10;
        
        // Área del gráfico
        this.ctx.beginPath();
        this.ctx.moveTo(0, height);
        this.data.forEach((value, index) => {
            const x = (width / (this.data.length - 1)) * index;
            const y = height - (value / 30) * height;
            if (index === 0) this.ctx.lineTo(x, y);
            else {
                const prevX = (width / (this.data.length - 1)) * (index - 1);
                const prevY = height - (this.data[index - 1] / 30) * height;
                const cpX = (prevX + x) / 2;
                this.ctx.quadraticCurveTo(prevX, prevY, cpX, (prevY + y) / 2);
            }
        });
        this.ctx.lineTo(width, height);
        this.ctx.closePath();
        this.ctx.fill();
        
        // Línea del gráfico
        this.ctx.beginPath();
        this.data.forEach((value, index) => {
            const x = (width / (this.data.length - 1)) * index;
            const y = height - (value / 30) * height;
            if (index === 0) this.ctx.moveTo(x, y);
            else this.ctx.lineTo(x, y);
        });
        this.ctx.stroke();
        
        // Punto de seguimiento del ratón
        const dataIndex = Math.round((this.mouseX / width) * (this.data.length - 1));
        if (dataIndex >= 0 && dataIndex < this.data.length) {
            const value = this.data[dataIndex];
            const x = (width / (this.data.length - 1)) * dataIndex;
            const y = height - (value / 30) * height;
            
            this.ctx.fillStyle = '#00f3ff';
            this.ctx.beginPath();
            this.ctx.arc(x, y, 4, 0, Math.PI * 2);
            this.ctx.fill();
            
            this.tooltip.style.left = x + 'px';
            this.tooltip.style.top = (y - 40) + 'px';
            this.tooltip.innerHTML = `${Math.round(value)}ms<br>${dataIndex}s atrás`;
            this.tooltip.style.opacity = 1;
            
            // Destacar picos de latencia
            if (value > 20) {
                this.ctx.shadowColor = '#ffb300';
                this.ctx.shadowBlur = 15;
                this.ctx.strokeStyle = '#ffb300';
                this.ctx.beginPath();
                this.ctx.arc(x, y, 8, 0, Math.PI * 2);
                this.ctx.stroke();
            }
        }
        
        this.ctx.shadowBlur = 0;
    }
    
    start() {
        const loop = () => {
            this.frame++;
            if (this.frame % 60 === 0) this.updateData();
            this.draw();
            requestAnimationFrame(loop);
        };
        loop();
    }
}

const performanceGraph = new PerformanceGraph();

// Registro Mejorado para Características Existentes
document.querySelectorAll('.script-btn').forEach(button => {
    button.addEventListener('click', function() {
        const scriptTitle = this.closest('.script-card').querySelector('.script-title').textContent;
        logManager.addLog(`Inyectando "${scriptTitle}"...`, 'info');
        
        setTimeout(() => {
            if (Math.random() > 0.1) {
                logManager.addLog(`Script "${scriptTitle}" inyectado exitosamente`, 'success');
                showNotification(`${scriptTitle} inyectado exitosamente!`, "success");
            } else {
                logManager.addLog(`Error al inyectar "${scriptTitle}": Tiempo de espera agotado`, 'error');
                showNotification(`Error de inyección: ${scriptTitle}`, "error");
            }
        }, 1000 + Math.random() * 2000);
    });
});

document.getElementById('executeBtn').addEventListener('click', function() {
    logManager.addLog('Ejecución solicitada', 'info');
    setTimeout(() => {
        logManager.addLog('Ejecución de script completada', 'success');
    }, 1500);
});

document.getElementById('clearBtn').addEventListener('click', () => {
    logManager.addLog('Terminal limpiado', 'warning');
});

document.getElementById('saveBtn').addEventListener('click', () => {
    logManager.addLog('Script guardado en almacenamiento en la nube', 'success');
});

// Funcionalidad del Botón de Descarga
document.querySelector('.btn-download').addEventListener('click', () => {
    showNotification('Descargando Black Echo v4.5.0...', 'info');
    logManager.addLog('Descarga del ejecutor iniciada', 'info');
});
</script>
</body>
</html>
